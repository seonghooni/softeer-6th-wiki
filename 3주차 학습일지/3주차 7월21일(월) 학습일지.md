# 1. 리뷰
## :laughing: 오늘 한 작업
### 1. 개발 과제 수행

#### POST 게시글 작성 폼 구현

게시글 작성 기능을 수행하는 Controller와 html 폼을 적용했다.

기존 코드 개선 작업 덕분에 어렵지 않게 추가할 수 있었다.

<br>

#### 이미지와 함께 게시글 작성 기능

4시간의 노력끝에도 결국 해내지 못했다... 반드시 해결하고 만다.

<br>

## :dizzy: 작업 과정에서의 배운 것

### 디버깅의 중요성

과제를 진행하면서 처음 1시간 동안은 문제 원인을 전혀 파악하지 못했다.

byte[] 배열을 바탕으로 디버깅을 진행하다보니 그런 것 같다.


결국에는 파일이 깨지는 원인은 잘못된 바운더리 분리 로직에 있었고,
이를 찾기 전까지는 계속 String 형태로만 비교하며 '왜 계속 이미지 파일이 깨지지?'만 무한 반복했던 것 같다.

기존에는 String으로 변환한 뒤 처리하는 방식이 익숙했기 때문에,
raw 데이터를 다룰 때 한 글자라도 누락되거나 인코딩이 바뀌면 어떤 문제가 발생하는지 체감할 수 있었다.



<br>


## :sob: 어려웠던 점

### 이미지 등록 기능을 구현하면서..

게시물 내용(content)와 이미지(image)를 multi-form format으로 받았는데,

업로드(클라이언트에서)한 이미지 파일이 자꾸 깨져 정상적으로 읽어올 수 없다.

알아보니, byte[] -> String -> byte[]로 변환하는 과정에서 손실이 발생한다는데..

byte[] 자체로 파싱하고, 이를 바탕으로 이미지 파일을 저장해야 한다.

하지만 나는 계속해서 requestBody의 boundary를 제대로 읽어오지 못하는 문제를 해결중이다..

오늘처럼 진도를 못나간 날은 처음이다.



<br><br>

# 2. 회고 (KPT)

✅ **K – Keep (유지할 것)**

- 해결하지 못하더라도 포기하지 않은 점..
- 문제 상황을 팀원들과 공유한 점 ( 하지만 팀원들도 해결하지 못했다.. )


🛠️ **P – Problem (개선이 필요한 점)**

- 편리한 방식만 추구하지 말자. byte 단위로도 디버깅할 줄 알아야 한다.

🔄 **T – Try (시도할 것)**

- 해결한 팀원이 있다면, 어떻게 적용했는지 나와의 차이점 분석해보기

<br><br>

# 3. 학습 내용

## 📌 multipart/form-data의 구조와 파싱 원리
HTTP 요청에서 multipart/form-data는 파일 업로드 등에 사용되며, 각 파트는 boundary로 구분된다.

헤더와 본문이 섞여 있어 일반적인 application/x-www-form-urlencoded보다 파싱이 복잡하다.

## 📌 byte[] 기반 데이터 처리의 민감성
byte 단위에서 한 글자라도 잘못 처리하면 데이터 손상 발생

String ↔ byte[] 간 변환 시 인코딩 주의 필요 (UTF-8, ISO-8859-1 등)

파일 저장 시 new String(byte[]) 후 다시 byte[]로 변환하는 방식은 피해야 함