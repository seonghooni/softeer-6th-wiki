# 1. 리뷰
## :laughing: 오늘 한 작업
### 🔹 테스트코드에 대한 학습 및 리팩토링

오늘은 테스트코드를 어떻게 작성해야 효율적으로 작성할 수 있을까에 대한 고민을 하며 관련 자료들을 찾아보았다.

남은 기간이 얼마 없기에 코드 커버리지를 어디까지 둘지에 대한 고민을 오래 했던 것 같다.

실제로 우리가 그동안 작성해온 테스트코드를 살펴보니, 정말 제대로 작성된 것이 많이 없다는 생각이 들었다.

우리는 여태까지 테스트코드를 조금씩 개선해 왔지만, 테스트코드가 늘어남에 따라 실행 시간이 1분을 넘어가기 시작했다.

우리의 프로젝트는 프론트엔드의 요청에 따라, 혹은 오류에 따라 리팩토링이 빈번하게 일어난다.

뿐만 아니라, 당장의 프로젝트 규모만 보더라도 1분이라는 시간은 개선할 여지가 있는 실행시간임이 분명하다고 생각했다.

따라서 오늘부터 들어갈 액션은 다음과 같다.

> 1. 테스트코드가 과연 정상적으로 작성되었는지?  
> 2. 더미 데이터를 넣을 때, 일관성 있고 정확한 데이터가 주입되었는지?

이 두 가지를 우선적으로 처리한 후에, 테스트코드 어디에서 병목현상이 일어났기에 우리의 개발생산성을 저하시켰는지 분석해보려고 한다.

오늘부터 조금씩, 테스트코드 리팩토링을 진행해보겠다.


<br>


## :dizzy: 작업 과정에서 배운점

### 🔹 테스트를 진행하면서 보니, 물리적인 fk 제약을 걸지 않는 것이 확실히 개발자에게 편리하다.

참조 무결성은 데이터의 일관성을 지키는데 필수적이다.

다만, 개발자 시점에서 더미 데이터를 삽입/삭제하는 과정에서 항상 참조 무결성이 큰 걸림돌이다.

멘토님들 말씀으로는, 실제 서비스에서 물리적인 FK를 걸지 않는 일이 많다고 하셨는데..

DB라는 관리 포인트를 하나 더 늘리는 게 손해라는... 말씀하셨던 하나의 이유가 납득이 갔다.

<br>

## :sob: 어려웠던 점

### 🔹 운영 & 테스트 환경에서의 DB를 다르게 가져가야 할까?

단순히 데이터를 정리하려 했을 뿐인데 FK 제약 때문에 삭제가 안 되는 경우가 많았다.

테스트를 빠르게 적용하기 위해서, FK를 비활성화하는 설정이 필요할지, 필요하다면, 테스트환경만 fk를 걸지 않는 방법이 있는지.. 그 부분이 어려웠다.


<br><br>

# 2. 회고 (KPT)

✅ **K – Keep (유지할 것)**
- 현재의 상황(소규모 프로젝트)과 빠른 개발이 필요하다는 점(단기 프로젝트)을 비추어 보아, 테스트 코드의 실행속도가 비정상적이라는 것을 확인하고 개선하고자 한 점.

🛠️ **P – Problem (개선이 필요한 점)**
- 아직은 감이 안온다. 어떻게 리팩토링할 지 명확한 기준이 필요한 것 같다.
  
🔄 **T – Try (시도할 것)**
- 좋은 테스트코드란 무엇인가? 에 대한 여러 개발자들의 고찰이 담긴 영상과 글을 찾아보자.
