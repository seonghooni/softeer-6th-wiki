# 1. 리뷰
## :laughing: 오늘 한 작업
### 🔹 테스트코드에 대한 기준

오늘은, 테스트코드를 어떻게 작성할지에 대한 나름의 기준을 세웠다.

좀더 테스트코드의 가독성을 높이기 위해 
- JUnit의 기본 assert 대신 AssertJ의 Assertions를 활용하기
- verify() 같은 과도한 Mock 검증은 배제하기
- save()와 같은 단순한 함수는 유닛테스트를 굳이 작성하지 않고, 통합테스트를 통해 검증하기
  
등의 원칙을 세웠다.

<br>

### 🔹 데모데이에서의 오류

금요일날, 마지막 데모데이 시연을 진행했다.

한 달동안 우리와 고생해준 기획/디자인 분들께서 방문하여 우리의 서비스를 구경해주셨다.

하지만 너무나 슬픈 일이 있었다.

10명 남짓한 기획/디자인분들께서 우리 서비스를 구경하시다가.. 서버가 다운되는 일이 발생했던 것이다.

큰 원인은 아니었고, DB Connection Pool의 문제였다..

이왕 문제가 생길거면 큰 문제가 생길 것이지..

그래도 한 가지 다행인 점은.. 8월 29일날 진행되는 시연 부스에서 발생한 문제가 아니라는 점이다.

이 문제가 재발하지 않도록 대비할 수 있어 다행이라는 생각이 들었다.

<br>


## :dizzy: 작업 과정에서 배운점

### 🔹 테스트코드 품질을 높이는 방법

리팩토링에 취약하지 않은 테스트는 Mock에 의존하기보다 실제 흐름을 검증하는 식으로 작성해야 한다.

DB 관련 테스트는 Testcontainers를 활용하거나, 최소한 테스트 전용 profile을 확실히 구분해 안정적으로 동작시켜야 한다.

@SpringBootTest에서 불필요한 빈 로딩을 줄이려면, **슬라이싱 테스트(@DataJpaTest, @WebMvcTest)**를 병행하는 전략이 효과적이다.


<br>

## :sob: 어려웠던 점

### 🔹 부딪힌 문제들

application-test.yml과 application-ci.yml을 어떻게 나눠야 할지, 그리고 Gradle이 올바른 프로파일을 읽게 하려면 어떤 설정이 필요한지가 헷갈렸다.  
(실제로 어떤 상황에서는 덮어쓰고, 어떤 상황에서는 Bean을 읽는 등.. 정말 충분한 시간동안 찾아보지 않으면 해결하기 어려운 문제가 있었다.)


<br><br>

# 2. 회고 (KPT)

✅ **K – Keep (유지할 것)**
- 테스트코드 작성 컨벤션을 명확히 세우고 팀 차원에서 공유하려는 노력.

🛠️ **P – Problem (개선이 필요한 점)**
- CI 환경에서 DB, API 키, yml 프로파일 관리가 체계적이지 못하다.
- Integration Test 실행 시간이 길어지고 있다.
- 또한, 오늘까지도 Integration Test 리팩토링을 마치지 못했다.
  
🔄 **T – Try (시도할 것)**
- DB 연동 테스트를 Testcontainers 기반으로 진행하자.
- Integration Test가 마무리되면, 어디서 병목이 일어나는지 분석해보자.
