# 1. 리뷰
## :laughing: 오늘 한 작업
### 🔹 CloudWatch Agent 세팅 및 로깅 및 모니터링 대시보드 구성

백엔드 API 개발이 마무리되고, 프론트엔드 요청 사항만 반영하면 되는 시점이라 이제는 백엔드 성능 개선에 집중할 수 있는 단계가 되었다.

성능 개선을 하기 전에, 매번 EC2 서버에 접속해 리소스 사용량이나 로그를 직접 확인하는 방식은 비효율적이라 판단했다. 그래서 CloudWatch를 통해 로그와 리소스를 모니터링할 수 있는 환경을 구축하고자 했다.

EC2, RDS 등 기본 인스턴스 지표 외에도 CPU 사용률, 메모리 사용량 같은 세부 정보를 관찰하려면 CloudWatch Agent가 필요했다. 

또, 우리 팀은 Spring Boot 애플리케이션을 Docker 컨테이너 환경에서 실행하고 있었기 때문에, JVM 메트릭을 확인하려면 Spring Boot에서 CloudWatch로 지표를 전송하도록 설정해야 했다.

이를 위해 application-prod.yml에 수집할 지표들을 지정했지만, 처음에는 정상적으로 동작하지 않아 시간을 꽤 소모했다. 원인은 yml에만 설정 값을 입력하는 게 아니라 설정파일에 일부 값이 누락되었던 것이었다.

스프링 버전마다, 어디는 yml에서 정의한 것만으로 동작하고, 어디는 일부 설정값을 빈으로 등록해줘야 하는 등.. 단기간에 캐치하기에는 골치 아픈 원인때문에 시간을 오래 보낸 것 같다.

<br>


## :dizzy: 작업 과정에서 배운점

### 🔹 CloudWatch Agent와 애플리케이션 모니터링의 차이 이해

CloudWatch Agent는 인스턴스/OS 레벨 지표(CPU, 메모리, 네트워크 등)를 수집하는 데 유용하고,  
애플리케이션 자체 지표(JVM 메모리, 스레드 수, GC 시간 등)는 애플리케이션에서 직접 CloudWatch로 전송해야 한다는 점을 알게 되었다. 

즉, 두 계층의 모니터링을 분리해서 설계해야 한다는 것을 깨달았다.



<br>

## :sob: 어려웠던 점

### 🔹 어떤 지표를 수집해야하고, 수집한 지표들로 대시보드를 어떻게 구성해야 할지 어려웠다.

EC2 인스턴스/OS 레벨에서 보내주는 지표와, 애플리케이션 레벨에서 보내주는 지표의 종류는 정말 다양했다.

지표를 정말 작은 단위로 확인할 수 있는 점은 분명한 이점인 것 같다.

예를 들면, GC에 대해서도 minor/major 각각의 GC에서 pause.max, pause.avg, pause.sum, pause.count 등 정말 다양한 지표가 있었다.

이렇게, CPU/메모리/네트워크/JVM/스레드수/GC시간 등을 어떻게 조합하고 비교할 수 있도록 대시보드를 구성해야할지 감이 전혀 오지 않았다.



<br><br>

# 2. 회고 (KPT)

✅ **K – Keep (유지할 것)**
- 성능 개선을 하더라도, 부하 테스트 및 모니터링으로 근거를 갖추기 위해 노력할 것


🛠️ **P – Problem (개선이 필요한 점)**
- 모니터링만을 보고 개선점을 찾기 보다는, 문제 상황이 발생한다면 그때서야 모니터링으로 분석하는 방식으로 접근해야 한다.
  
🔄 **T – Try (시도할 것)**
- 부하테스트 방법을 조사하고, 챌린지할 수 있는 요소에 대해 구체적으로 정리해보기
